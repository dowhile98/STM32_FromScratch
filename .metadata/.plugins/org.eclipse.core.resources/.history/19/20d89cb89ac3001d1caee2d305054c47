/*
 * delay.c
 *
 *  Created on: 15 mar. 2023
 *      Author: jeffr
 */


#include "delay.h"




void SysTickInit(void){
	uint32_t temp;
	//1. deshabilitar el conteo de la systick
	SysTick->CTRL &=~ SysTick_CTRL_ENABLE_Msk;
	//2. configurar el valor del registro reload
	SystemCoreClockUpdate();
	temp = SystemCoreClock / 1000 - 1;
	SysTick->LOAD = temp;
	//3. Configuras el registro de control y habilitas el conteo
	SysTick->CTRL |= SysTick_CTRL_CLKSOURCE_Msk; 			//system core clock

	//configurar la IT
	SysTick->CTRL |= SysTick_CTRL_TICKINT_Msk;				//habilita la IT
	NVIC_SetPriority(SysTick_IRQn, 15);

	SysTick->CTRL |= SysTick_CTRL_ENABLE_Msk;				//habilita el conteo

	return;
}


/**
 * @brief funcion para generar retardos en ms
 */
void delay_ms(uint32_t delay);
/**
 * @brief retorna el ticks generado por la SysTick
 * @return uint32_t
 */
uint32_t GetTicks(void);
